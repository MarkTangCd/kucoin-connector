"use strict";var n=require("@web3-react/abstract-connector");function e(){return(e=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function t(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,o(n,e)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function o(n,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n})(n,e)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}function c(n,e,t){return(c=i()?Reflect.construct.bind():function(n,e,t){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(n,r));return t&&o(i,t.prototype),i}).apply(null,arguments)}function u(n){var e="function"==typeof Map?new Map:void 0;return(u=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return c(n,arguments,r(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,n)})(n)}function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d(n,e){try{var t=n()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function h(n){return n.hasOwnProperty("result")?n.result:n}require("tiny-warning"),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var s=function(n){function e(){var e;return(e=n.call(this)||this).name=e.constructor.name,e.message="No Ethereum provider was found on window.kucoin.",e}return t(e,n),e}(u(Error)),f=function(n){function e(){var e;return(e=n.call(this)||this).name=e.constructor.name,e.message="The user rejected the request.",e}return t(e,n),e}(u(Error));exports.KuCoinConnector=function(n){function r(e){var t;return(t=n.call(this,e)||this).handleNetworkChanged=t.handleNetworkChanged.bind(a(t)),t.handleChainChanged=t.handleChainChanged.bind(a(t)),t.handleAccountsChanged=t.handleAccountsChanged.bind(a(t)),t.handleClose=t.handleClose.bind(a(t)),t}t(r,n);var o=r.prototype;return o.handleChainChanged=function(n){var e;this.emitUpdate({chainId:n,provider:null==(e=window.kucoin)?void 0:e.provider})},o.handleAccountsChanged=function(n){0===n.length?this.emitDeactivate():this.emitUpdate({account:n[0]})},o.handleClose=function(n,e){this.emitDeactivate()},o.handleNetworkChanged=function(n){var e;this.emitUpdate({chainId:n,provider:null==(e=window.kucoin)?void 0:e.provider})},o.activate=function(){try{var n,t=function(t){if(r)return t;function o(){return e({provider:window.kucoin.provider},n?{account:n}:{})}var i=function(){if(!n)return Promise.resolve(window.kucoin.provider.enable().then((function(n){return n&&h(n)[0]}))).then((function(e){n=e}))}();return i&&i.then?i.then(o):o()},r=!1;if(!window.kucoin)throw new s;window.kucoin.provider.on&&(window.kucoin.provider.on("chainChanged",this.handleChainChanged),window.kucoin.provider.on("accountsChanged",this.handleAccountsChanged),window.kucoin.provider.on("close",this.handleClose),window.kucoin.provider.on("networkChanged",this.handleNetworkChanged));var o=d((function(){return Promise.resolve(window.kucoin.provider.send("eth_requestAccounts").then((function(n){return h(n)[0]}))).then((function(e){n=e}))}),(function(n){if(4001===n.code)throw new f}));return Promise.resolve(o&&o.then?o.then(t):t(o))}catch(n){return Promise.reject(n)}},o.getProvider=function(){try{var n;return Promise.resolve(null==(n=window.kucoin)?void 0:n.provider)}catch(n){return Promise.reject(n)}},o.getChainId=function(){try{var n,e=function(){function e(){if(!n)try{n=h(window.kucoin.provider.send({method:"net_version"}))}catch(n){}return n||(n=window.kucoin.provider.isDapper?h(window.kucoin.provider.cachedResults.net_version):window.kucoin.provider.chainId||window.kucoin.provider.netVersion||window.kucoin.provider.networkVersion||window.kucoin.provider._chainId),n}var t=function(){if(!n){var e=d((function(){return Promise.resolve(window.kucoin.provider.send("net_version").then(h)).then((function(e){n=e}))}),(function(){}));if(e&&e.then)return e.then((function(){}))}}();return t&&t.then?t.then(e):e()};if(!window.kucoin)throw new s;var t=d((function(){return Promise.resolve(window.kucoin.provider.send("eth_chainId").then(h)).then((function(e){n=e}))}),(function(){}));return Promise.resolve(t&&t.then?t.then(e):e())}catch(n){return Promise.reject(n)}},o.getAccount=function(){try{var n,e=function(){function e(){return n||(n=h(window.kucoin.provider.send({method:"eth_accounts"}))[0]),n}var t=function(){if(!n){var e=d((function(){return Promise.resolve(window.kucoin.provider.enable().then((function(n){return h(n)[0]}))).then((function(e){n=e}))}),(function(){}));if(e&&e.then)return e.then((function(){}))}}();return t&&t.then?t.then(e):e()};if(!window.kucoin)throw new s;var t=d((function(){return Promise.resolve(window.kucoin.provider.send("eth_accounts").then((function(n){return h(n)[0]}))).then((function(e){n=e}))}),(function(){}));return Promise.resolve(t&&t.then?t.then(e):e())}catch(n){return Promise.reject(n)}},o.deactivate=function(){window.kucoin&&window.kucoin.provider.removeListener&&(window.kucoin.provider.removeListener("chainChanged",this.handleChainChanged),window.kucoin.provider.removeListener("accountsChanged",this.handleAccountsChanged),window.kucoin.provider.removeListener("close",this.handleClose),window.kucoin.provider.removeListener("networkChanged",this.handleNetworkChanged))},o.isAuthorized=function(){try{return window.kucoin?Promise.resolve(d((function(){return Promise.resolve(window.kucoin.provider.send("eth_accounts").then((function(n){return h(n).length>0})))}),(function(){return!1}))):Promise.resolve(!1)}catch(n){return Promise.reject(n)}},r}(n.AbstractConnector),exports.NoEthereumProviderError=s,exports.UserRejectedRequestError=f;
//# sourceMappingURL=kucoin-connector.cjs.production.min.js.map
